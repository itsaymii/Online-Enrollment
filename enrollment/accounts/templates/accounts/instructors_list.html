<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Instructors List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
    .modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        overflow: auto;
        background: rgba(0,0,0,0.2);
    }
    .modal.show {
        display: flex !important;
        align-items: center;
        justify-content: center;
    }
    .modal-content {
        background: linear-gradient(135deg, #f8fafc 60%, #e3e6ed 100%);
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.18);
        padding: 40px 32px 32px 32px;
        max-width: 420px;
        margin: 0;
        z-index: 10000;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border: 1px solid #e3e6ed;
        transition: box-shadow 0.2s, transform 0.2s;
        animation: modalPop 0.3s cubic-bezier(.25,.8,.25,1);
    }
    @keyframes modalPop {
        0% { transform: scale(0.95) translateY(20px); opacity: 0; }
        100% { transform: scale(1) translateY(0); opacity: 1; }
    }
    .modal-content h2 {
        font-size: 1.6rem;
        font-weight: 700;
        color: #2563eb;
        margin-bottom: 18px;
        letter-spacing: 0.5px;
        text-align: center;
    }
    .modal-content form {
        width: 100%;
    }
    .modal-content .close {
        position: absolute;
        top: 18px;
        right: 18px;
        font-size: 1.3rem;
        background: #e3e6ed;
        color: #2563eb;
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        transition: background 0.2s, color 0.2s;
    }
    .modal-content .close:hover {
        background: #2563eb;
        color: #fff;
    }
    .modal-content button[type="submit"] {
        width: 100%;
        font-size: 1.1rem;
        padding: 12px 0;
        border-radius: 8px;
        font-weight: 600;
        box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        margin-top: 10px;
        transition: background 0.2s, color 0.2s;
    }
    .modal-content .btn-success {
        background: linear-gradient(90deg, #22c55e 60%, #16a34a 100%);
        border: none;
    }
    .modal-content .btn-success:hover {
        background: linear-gradient(90deg, #16a34a 60%, #22c55e 100%);
        color: #fff;
    }
    .modal-content .btn-primary {
        background: linear-gradient(90deg, #2563eb 60%, #0d6efd 100%);
        border: none;
    }
    .modal-content .btn-primary:hover {
        background: linear-gradient(90deg, #0d6efd 60%, #2563eb 100%);
        color: #fff;
    }
    .modal-content input, .modal-content select {
        border-radius: 8px;
        border: 1px solid #e3e6ed;
        padding: 10px;
        margin-bottom: 10px;
        font-size: 1rem;
        width: 100%;
        box-sizing: border-box;
        background: #f8fafc;
        transition: border 0.2s;
    }
    .modal-content input:focus, .modal-content select:focus {
        border: 1.5px solid #2563eb;
        outline: none;
        background: #fff;
    }
    .modal-blur .main-content {
        filter: blur(4px);
        pointer-events: none;
        user-select: none;
    }
    .modal {
        filter: none !important;
    }
    </style>
    <script src="/static/modal.js"></script>
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.modal .close').forEach(function(btn) {
        btn.onclick = function() {
            closeModal(btn.closest('.modal').id);
        };
    });
});
</script>
</head>
<body>
        <div class="container mt-3" style="background: #f9f9f9; border-radius: 18px; box-shadow: 0 2px 12px rgba(0,0,0,0.04); padding: 32px 24px; max-width: 1200px;">
            <div class="d-flex align-items-center justify-content-between mb-4">
                <h2 class="fw-bold text-primary mb-0">Instructors List</h2>
                <button class="btn btn-success rounded-3 fw-semibold px-4 py-2" onclick="openModal('addInstructorModal')">Add Instructor</button>
            </div>
            <div class="table-responsive" style="max-height: 520px; min-height: 420px; overflow-y: auto;">
                <table class="table align-middle bg-white rounded-4 shadow-sm overflow-hidden" style="min-width: 700px;">
                    <thead class="bg-primary text-white" style="position: sticky; top: 0; z-index: 2;">
                        <tr style="border-radius: 12px;">
                            <th class="py-3 px-4" style="position: sticky; top: 0; background: linear-gradient(90deg, #2563eb 60%, #0d6efd 100%); z-index: 3;">Instructor ID</th>
                            <th class="py-3 px-4" style="position: sticky; top: 0; background: linear-gradient(90deg, #2563eb 60%, #0d6efd 100%); z-index: 3;">Name</th>
                            <th class="py-3 px-4" style="position: sticky; top: 0; background: linear-gradient(90deg, #2563eb 60%, #0d6efd 100%); z-index: 3;">Email</th>
                            <th class="py-3 px-2" style="position: sticky; top: 0; background: linear-gradient(90deg, #2563eb 60%, #0d6efd 100%); z-index: 3; width: 120px;">Department</th>
                            <th class="py-3 px-4" style="position: sticky; top: 0; background: linear-gradient(90deg, #2563eb 60%, #0d6efd 100%); z-index: 3;">Contact Number</th>
                            <th class="py-3 px-4" style="position: sticky; top: 0; background: #2563eb; z-index: 3;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for instructor in instructors %}
                        <tr class="table-row-hover" style="transition: background 0.2s;">
                            <td class="py-3 px-4">{{ instructor.instructor_id }}</td>
                            <td class="py-3 px-4">{{ instructor.name }}</td>
                            <td class="py-3 px-4">{{ instructor.email }}</td>
                            <td class="py-3 px-2" style="width: 120px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ instructor.department }}</td>
                            <td class="py-3 px-4">{{ instructor.contact_number }}</td>
                            <td class="py-3 px-4">
                                <button class="btn btn-primary btn-sm rounded-2 px-3" onclick="openModal('editInstructorModal{{ instructor.instructor_id }}')">Edit</button>
                            </td>
                        </tr>
                        {% empty %}
                        <tr><td colspan="6" class="text-center py-4">No instructors found.</td></tr>
                        {% endfor %}
                                <div class="modal" id="addInstructorModal">
                                    <div class="modal-content">
                                        <span class="close btn btn-secondary float-end">&times;</span>
                                        <h2 class="mb-4 fw-bold text-primary">Add Instructor</h2>
                                        <form method="post" action="{% url 'instructors_list' %}">
                                            {% csrf_token %}
                                            <input type="hidden" name="action" value="add">
                                            {{ add_form.as_p }}
                                            <button type="submit" class="btn btn-success px-4 py-2 rounded-3">Add Instructor</button>
                                        </form>
                                    </div>
                                </div>
                                {% for instructor, edit_form in instructor_forms %}
                                <div class="modal" id="editInstructorModal{{ instructor.instructor_id }}">
                                    <div class="modal-content">
                                        <span class="close btn btn-secondary float-end">&times;</span>
                                        <h2 class="mb-4 fw-bold text-primary">Edit Instructor</h2>
                                        <form method="post" action="{% url 'instructors_list' %}">
                                            {% csrf_token %}
                                            <input type="hidden" name="action" value="edit_{{ instructor.instructor_id }}">
                                            <input type="hidden" name="instructor_id" value="{{ instructor.instructor_id }}">
                                            {{ edit_form.as_p }}
                                            <button type="submit" class="btn btn-primary px-4 py-2 rounded-3">Update</button>
                                        </form>
                                    </div>
                                </div>
                                {% endfor %}
                    </tbody>
                </table>
            </div>
            <style>
                .table {
                    border-radius: 16px;
                    overflow: hidden;
                    box-shadow: 0 6px 32px rgba(0,0,0,0.12);
                    background: #f8fafc;
                    border: 1px solid #e3e6ed;
                }
                .table-responsive {
                    scrollbar-width: none; 
                    -ms-overflow-style: none; 
                }
                .table-responsive::-webkit-scrollbar {
                    display: none; 
                }
                .table-row-hover:hover {
                    background: #e3e6ed !important;
                }
                thead.bg-primary th {
                    background: linear-gradient(90deg, #2563eb 60%, #0d6efd 100%);
                    color: #fff;
                    border-bottom: 2px solid #2563eb;
                }
                td {
                    background: #fff;
                    border-bottom: 1px solid #e3e6ed;
                }
            </style>
        </div>
</body>
</html>
